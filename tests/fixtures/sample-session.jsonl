{"type":"user","uuid":"u1","parentUuid":null,"sessionId":"test-session-1","timestamp":"2026-01-15T10:00:00.000Z","message":{"role":"user","content":"fix the authentication bug in login.ts"},"cwd":"/Users/test/project","gitBranch":"main","slug":"test-slug","version":"2.1.39","isSidechain":false}
{"type":"assistant","uuid":"a1","parentUuid":"u1","sessionId":"test-session-1","timestamp":"2026-01-15T10:00:05.000Z","message":{"role":"assistant","model":"claude-sonnet-4-5-20250514","content":[{"type":"thinking","thinking":"Let me analyze the authentication bug. The user wants me to fix login.ts. I should read the file first to understand the issue."},{"type":"text","text":"I'll look at the login.ts file to understand the authentication issue."},{"type":"tool_use","id":"toolu_001","name":"Read","input":{"file_path":"/Users/test/project/src/login.ts"}}],"usage":{"input_tokens":1500,"output_tokens":200,"cache_read_input_tokens":5000,"cache_creation_input_tokens":100}},"cwd":"/Users/test/project","gitBranch":"main","slug":"test-slug","version":"2.1.39","requestId":"req_001"}
{"type":"user","uuid":"u2","parentUuid":"a1","sessionId":"test-session-1","timestamp":"2026-01-15T10:00:06.000Z","message":{"role":"user","content":[{"type":"tool_result","tool_use_id":"toolu_001","content":"export function login(user: string, pass: string) {\n  return db.query(`SELECT * FROM users WHERE name='${user}'`);\n}","is_error":false}]},"cwd":"/Users/test/project","gitBranch":"main","slug":"test-slug","version":"2.1.39"}
{"type":"assistant","uuid":"a2","parentUuid":"u2","sessionId":"test-session-1","timestamp":"2026-01-15T10:00:10.000Z","message":{"role":"assistant","model":"claude-sonnet-4-5-20250514","content":[{"type":"text","text":"I found a SQL injection vulnerability! The user input is directly interpolated into the query string."},{"type":"tool_use","id":"toolu_002","name":"Edit","input":{"file_path":"/Users/test/project/src/login.ts","old_string":"return db.query(`SELECT * FROM users WHERE name='${user}'`);","new_string":"return db.query('SELECT * FROM users WHERE name = ?', [user]);"}}],"usage":{"input_tokens":2000,"output_tokens":300,"cache_read_input_tokens":6000,"cache_creation_input_tokens":50}},"cwd":"/Users/test/project","gitBranch":"main","slug":"test-slug","version":"2.1.39","requestId":"req_002"}
{"type":"user","uuid":"u3","parentUuid":"a2","sessionId":"test-session-1","timestamp":"2026-01-15T10:00:11.000Z","message":{"role":"user","content":[{"type":"tool_result","tool_use_id":"toolu_002","content":"File edited successfully","is_error":false}]},"cwd":"/Users/test/project","gitBranch":"main","slug":"test-slug","version":"2.1.39"}
{"type":"assistant","uuid":"a3","parentUuid":"u3","sessionId":"test-session-1","timestamp":"2026-01-15T10:00:15.000Z","message":{"role":"assistant","model":"claude-sonnet-4-5-20250514","content":[{"type":"text","text":"Fixed the SQL injection vulnerability by using parameterized queries."},{"type":"tool_use","id":"toolu_003","name":"Bash","input":{"command":"cd /Users/test/project && npm test"}}],"usage":{"input_tokens":2500,"output_tokens":100,"cache_read_input_tokens":7000,"cache_creation_input_tokens":30}},"cwd":"/Users/test/project","gitBranch":"main","slug":"test-slug","version":"2.1.39","requestId":"req_003"}
{"type":"user","uuid":"u4","parentUuid":"a3","sessionId":"test-session-1","timestamp":"2026-01-15T10:00:20.000Z","message":{"role":"user","content":[{"type":"tool_result","tool_use_id":"toolu_003","content":"FAIL: login.test.ts - Expected token validation","is_error":true}]},"cwd":"/Users/test/project","gitBranch":"main","slug":"test-slug","version":"2.1.39"}
{"type":"progress","uuid":"p1","parentUuid":"a3","sessionId":"test-session-1","timestamp":"2026-01-15T10:00:21.000Z","data":{"type":"bash_progress"},"cwd":"/Users/test/project","gitBranch":"main","slug":"test-slug","version":"2.1.39","toolUseID":"toolu_003"}
{"type":"queue-operation","sessionId":"test-session-1","timestamp":"2026-01-15T10:00:22.000Z","operation":"enqueue","content":"{\"task_id\":\"t1\",\"description\":\"background task\",\"task_type\":\"test\"}"}
{"type":"assistant","uuid":"a4","parentUuid":"u4","sessionId":"test-session-1","timestamp":"2026-01-15T10:00:25.000Z","message":{"role":"assistant","model":"claude-sonnet-4-5-20250514","content":[{"type":"text","text":"The test failed. Let me also fix the token validation."}],"usage":{"input_tokens":3000,"output_tokens":80,"cache_read_input_tokens":8000,"cache_creation_input_tokens":20}},"cwd":"/Users/test/project","gitBranch":"main","slug":"test-slug","version":"2.1.39","requestId":"req_004"}
{"type":"user","uuid":"u5","parentUuid":"a4","sessionId":"test-session-1","timestamp":"2026-01-15T10:01:00.000Z","message":{"role":"user","content":"yes, fix that too please"},"cwd":"/Users/test/project","gitBranch":"main","slug":"test-slug","version":"2.1.39"}
{"type":"assistant","uuid":"a5","parentUuid":"u5","sessionId":"test-session-1","timestamp":"2026-01-15T10:01:05.000Z","message":{"role":"assistant","model":"<synthetic>","content":[{"type":"text","text":"passthrough message"}]},"cwd":"/Users/test/project","gitBranch":"main","slug":"test-slug","version":"2.1.39"}
{"type":"user","uuid":"u6","parentUuid":"a5","sessionId":"test-session-1","timestamp":"2026-01-15T10:01:10.000Z","message":{"role":"user","content":"<system-reminder>This is a system reminder</system-reminder>"},"cwd":"/Users/test/project","gitBranch":"main","slug":"test-slug","version":"2.1.39"}
{"type":"user","uuid":"u7","parentUuid":"a5","sessionId":"test-session-1","timestamp":"2026-01-15T10:01:11.000Z","message":{"role":"user","content":"compact summary text"},"cwd":"/Users/test/project","gitBranch":"main","slug":"test-slug","version":"2.1.39","isMeta":true}
{"type":"user","uuid":"u8","parentUuid":"a5","sessionId":"test-session-1","timestamp":"2026-01-15T10:01:12.000Z","message":{"role":"user","content":"compacted context"},"cwd":"/Users/test/project","gitBranch":"main","slug":"test-slug","version":"2.1.39","isCompactSummary":true}
{"type":"system","uuid":"s1","parentUuid":"a4","sessionId":"test-session-1","timestamp":"2026-01-15T10:01:30.000Z","subtype":"compact_boundary","cwd":"/Users/test/project","gitBranch":"main","slug":"test-slug","version":"2.1.39","compactMetadata":{"preTokens":50000},"logicalParentUuid":"a3"}
{"type":"system","uuid":"s2","parentUuid":"a4","sessionId":"test-session-1","timestamp":"2026-01-15T10:01:35.000Z","subtype":"turn_duration","durationMs":5000,"cwd":"/Users/test/project","gitBranch":"main","slug":"test-slug","version":"2.1.39"}
{"type":"file-history-snapshot","snapshot":{"trackedFileBackups":{"src/login.ts":{"backupFileName":"abc123@v2","version":2,"backupTime":"2026-01-15T10:00:15.000Z"},"src/auth.ts":{"backupFileName":"def456@v1","version":1,"backupTime":"2026-01-15T10:01:00.000Z"}}},"messageId":"a4","type":"file-history-snapshot"}
{"type":"file-history-snapshot","snapshot":{"trackedFileBackups":{"src/login.ts":{"backupFileName":"abc123@v3","version":3,"backupTime":"2026-01-15T10:02:00.000Z"},"src/auth.ts":{"backupFileName":"def456@v2","version":2,"backupTime":"2026-01-15T10:02:05.000Z"},"src/middleware.ts":{"backupFileName":"ghi789@v1","version":1,"backupTime":"2026-01-15T10:02:10.000Z"}}},"messageId":"a5","type":"file-history-snapshot"}
{"type":"pr-link","prNumber":42,"prUrl":"https://github.com/test/project/pull/42","prRepository":"test/project"}
{"type":"summary","summary":"Fix auth SQL injection and token validation","leafUuid":"a5"}
